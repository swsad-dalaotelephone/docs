## 后端代码规范

| 版本 |   日期    | 描述 |  作者   |
| :--: | :-------: | :--: | :-----: |
| v1.0 | 2019-04-05 | 完成go代码编写规范 | gitgiter |

### go语言编写规范

> 优秀的命名应当是一贯的、短小的、精确的

尽量使用专门的工具进行实时的代码规范监督，且工具应统一。目前推荐：vscode的go插件。如无法统一便按标准库源码规范编写，几个主要的注意点如下：

#### 命名规范
- 变量名、函数参数名：
    - 采用驼峰命名；
    - 无特殊情况首字母一律小写；
    - 不要以下划线开头；
    - 尽量使用简洁、有意义的名称；
    - 没有明显关系的变量分行声明，不要因为只是类型一样方便声明而挤到一行；
    - 如果无法一眼看出含义，请使用注释；
        - 变量名的注释也尽量简洁，写在变量名之上，且注释与上文代码或其他注释以换行隔开，与被注释的变量之间不换行；
        - 函数参数名的注释一律写在函数注释中；
- 函数名：
    - 采用驼峰命名；
    - 首字母一律大写；
    - 不要以下划线开头；
    - 必须使用简洁、有意义的名称；
    - 函数名与后面的左圆括号之间不空格；
    - 右圆括号与左花括号之间空格且花括号不换行；
    - 右花括号单独一行；
- 结构体名：
    - 采用驼峰命名；
    - 首字母一律大写；
    - 不要以下划线开头；
    - 必须使用简洁、有意义的名称，尽量使用单个单词；
    - struct关键字后的左花括号不换行；
    - 右花括号单独一行；
- 结构体成员变量名：
    - 采用驼峰命名；
    - 首字母一律大写，否则数据时无法访问；
    - 不要以下划线开头；
    - 必须使用简洁、有意义的名称，尽量体现为一个属性；
    - 每个成员变量单独一行，且必须有注释，在被注释变量之上，与前面的变量换行隔开，与被注释变量之间不换行；
- 包名：
    - 使用小写，尽量是单个单词或短语；
    - 一律不使用下划线；
    - 保持与目录名称一致；
    - 必须使用简洁、有意义的名称；
    - 尽量和标准库不要冲突；

#### 注释规范
- 言简意赅，可读性好；
- 针对性强，相同内容不重复注释；
- 单行注释使用 // ，且 // 后应有空格；
- 多行使用 /**/ ，且 /* 与 */ 分别独立一行，中间行的 * 后要带空格；
- 与上文不相关的代码或注释以换行隔开，与被注释的内容不换行；
- 不要在某一句代码后面（右边）使用注释，特别简短（1~3个单词）的例外；
- 统一使用英文注释；

#### 其他
- 内置函数如while、for、if-else的左花括号不换行，其中else与if的右花括号同行；
- 同一个变量名不要在不同上下文中使用；
- 变量名不得与函数名冲突；
- import使用圆括号统一导入，左圆括号不换行，右圆括号单独一行，不引入没有使用的包；
- 一个函数不要含有太长的代码
    - 如果逻辑确实较多且有明显的逻辑块或者局部代码复用度高，可以进一步将逻辑块抽象出新的函数；
    - 如果逻辑确实角度且逻辑块之间有明显的顺序关系，各个逻辑块可以换行隔开，逻辑块首行必须有注释；
- 单行代码尽量不要太长，要求在一屏里显示全，如需使用横向滚轮则为过长；
    - 应优先考虑简短单行代码长度，如确实过长才使用换行处理，
    - 应避免使用 functionA(functionB(xxx,xxx), functionC(xxx), xxx, functionD(xxx)) 的嵌套调用方式，容易导致单行代码过长且不方便debug；
    - 如函数参数过多（如5个及以上），可以采用多行调用
    ```go
    functionA(
        xxxx,
        xxxx,
        xxxx,
        xxxx,
        xxxx,
        xxxx
    )
    ```
    - 如存在多行赋值代码，应保证等号对齐；
- 缩进一律使用空格，不能用tab，可在编辑器中设置用 **4个空格** 代替tab。
- **逗号后面要空格；**
- **算符左右两边都需要空格；**

### 数据库规范

### 接口规范